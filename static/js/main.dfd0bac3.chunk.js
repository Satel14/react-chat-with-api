(this["webpackJsonpreact-chat-with-api"]=this["webpackJsonpreact-chat-with-api"]||[]).push([[0],{26:function(e,t,a){},38:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(17),c=a.n(n),i=a(12),u=a(3),o=a(14),d=a(11),l=a(47),m=a(40),g=function(){return m.get("https://api.chucknorris.io/jokes/random")},j=a(41),h=a.n(j),b=a.p+"static/media/alert.d2fd69a8.mp3",f={dialogs:[{dialogId:"dialog1",members:[{userId:1,userName:"Alice Freeman"},{userId:6,userName:"Me"}],messages:[{messageId:1,messageText:"Hi, please can u help me?",userId:1,createdAt:"Sat Sep 18 2021 08:10:48"}]},{dialogId:"dialog2",members:[{userId:2,userName:"Josefina"},{userId:6,userName:"Me"}],messages:[{messageId:1,messageText:"Quickly come to the meeting room 1B, we have big server issue",userId:2,createdAt:"Sat Sep 18 2021 08:06:48"},{messageId:2,messageText:"I'm having breakfast right now, can't you wait for 10 minutes?",userId:6,createdAt:"Sat Sep 10 2021 08:07:48"},{messageId:3,messageText:"We are losing money! Quick!",userId:2,createdAt:"Sat Sep 10 2021 08:09:48"}]},{dialogId:"dialog3",members:[{userId:3,userName:"Velazquez"},{userId:6,userName:"Me"}],messages:[{messageId:1,messageText:"Hi how are you?",userId:3,createdAt:"Sat Sep 17 2021 19:07:48"},{messageId:2,messageText:"Hi everything is good.",userId:6,createdAt:"Sat Sep 17 2021 19:10:48"},{messageId:3,messageText:"Good to see you",userId:3,createdAt:"Sat Sep 18 2021 19:15:48"}]},{dialogId:"dialog4",members:[{userId:4,userName:"Barrera"},{userId:6,userName:"Me"}],messages:[{messageId:1,messageText:"Hi, Barrera",userId:6,createdAt:"Sat Sep 09 2021 12:00:48"},{messageId:2,messageText:"Hi, how are you",userId:4,createdAt:"Sat Sep 09 2021 12:01:48"},{messageId:3,messageText:"Not bad, thanks.",userId:6,createdAt:"Sat Sep 09 2021 12:02:48"}]},{dialogId:"dialog5",members:[{userId:5,userName:"Mellisa Davenport"},{userId:6,userName:"Me"}],messages:[{messageId:1,messageText:"Hello, how are you?",userId:5,createdAt:"2022-08-02 12:09:48"},{messageId:2,messageText:"Im fine",userId:6,createdAt:"2022-08-02 17:39:48"},{messageId:3,messageText:"Ok,bye",userId:5,createdAt:"2022-08-02 17:40:48"}]}],chatFilter:""},x=function(e,t,a){return{type:"ADD_NEW_MESSAGE",dialogId:e,messageText:t,userId:a}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NEW_MESSAGE":var a={messageId:h()(),messageText:t.messageText,userId:t.userId,createdAt:new Date},s=JSON.parse(JSON.stringify(e));return s.dialogs.map((function(e){return e.dialogId===t.dialogId?e.messages=[].concat(Object(l.a)(e.messages),[a]):e})),s;case"SET_CHAT_FILTER":return Object(d.a)(Object(d.a)({},e),{},{chatFilter:t.filterText});default:return e}},O=(a(75),a.p+"static/media/profile-avatar.2fda6558.png"),p=a(1),I=function(e){var t=e.avatar;return Object(p.jsx)("div",{className:"avatar",children:Object(p.jsx)("div",{className:"avatar__img",children:Object(p.jsx)("img",{src:t||O,alt:"avatar"})})})},N=(a(77),function(e){var t=e.currentMember,a=e.lastMessage,s=e.memberName,r=e.createdAt;return Object(p.jsxs)("div",{className:"chat",children:[Object(p.jsxs)("div",{className:"chat__wrapper",children:[Object(p.jsx)(I,{avatar:t.avatar,online:t.online}),Object(p.jsxs)("div",{className:"chat__context",children:[Object(p.jsx)("span",{className:"chat__name",children:s}),Object(p.jsx)("span",{className:"chat__lastMessage",children:a})]})]}),Object(p.jsx)("span",{className:"chat__date",children:r})]})}),_=a(20),S=a.n(_),T=function(e,t){return(null===e||void 0===e?void 0:e.toLowerCase().indexOf(t.toLowerCase()))>-1},A=function(e,t,a){var s=e.filter((function(e){return e.userId!==t}))[0];return a.filter((function(e){return e.userId===s.userId}))[0]},y=(a(38),a(48)),M=a(21),w=a.n(M),k=a(29),F=(a(26),function(e){var t="840204595437-uef0n28i5kt903fc8vkllg6tb0p1ig2o.apps.googleusercontent.com";Object(s.useEffect)((function(){k.a.load("client:auth2",(function(){k.a.auth2.init({clientId:t})}))}),[]);var a=function(t){e.response(t)};return Object(p.jsx)("div",{className:"google_login",children:Object(p.jsx)(w.a,{clientId:t,buttonText:"Login with Google",onSuccess:a,onFailure:a,cookiePolicy:"single_host_origin"})})}),E=function(e){return Object(p.jsx)("div",{className:"google_logout",children:Object(p.jsx)(M.GoogleLogout,{clientId:"840204595437-uef0n28i5kt903fc8vkllg6tb0p1ig2o.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){e.response()}})})},D=function(){var e=Object(s.useState)(),t=Object(y.a)(e,2),a=t[0],r=t[1],n=function(e){r(e)};return Object(p.jsx)("div",{className:"google_content",children:a?Object(p.jsxs)("div",{className:"google__header",children:[Object(p.jsx)("img",{src:a.profileObj.imageUrl,alt:""}),Object(p.jsx)("h5",{children:a.profileObj.name}),Object(p.jsx)(E,{response:n})]}):Object(p.jsx)(F,{response:n})})},C=function(e){var t=e.users,a=e.auth,s=e.setChatFilter,r=e.chatFilter,n=e.dialogs.map((function(e){var s=e.messages[e.messages.length-1],r=S()(s.createdAt).format("ll"),n=A(e.members,a.userId,t),c=s.userId===a.userId?"Me":n.userName;return Object(p.jsx)(i.b,{to:"/".concat(e.dialogId),className:"chat__item",children:Object(p.jsx)(N,{lastMessage:e.messages[e.messages.length-1].messageText,createdAt:r,currentMember:n,memberName:c})},"".concat(e.dialogId))}));return Object(p.jsxs)("div",{className:"chats",children:[Object(p.jsx)("div",{className:"chats__header",children:Object(p.jsxs)("div",{className:"chats__search",children:[Object(p.jsxs)("div",{className:"chats__user",children:[Object(p.jsx)(I,{avatar:a.avatar,online:a.islogin}),a.islogin?Object(p.jsx)("span",{children:a.userName}):null,Object(p.jsx)(D,{})]}),Object(p.jsx)("div",{className:"chat__form",children:Object(p.jsx)("input",{type:"text",placeholder:"Search or start new chat",value:r,onChange:function(e){return function(e){s(e.currentTarget.value)}(e)}})})]})}),Object(p.jsx)("h2",{children:"Chats"}),Object(p.jsx)("div",{className:"chats__wrapper",children:n})]})},L=a(43),H=function(e){return e.users.users},G=function(e){return e.dialogs.dialogs},J=function(e){return e.auth.userId},B=Object(L.a)(G,(function(e){return e.sort((function(e,t){return new Date(t.messages[t.messages.length-1].createdAt)-new Date(e.messages[e.messages.length-1].createdAt)}))})),R=Object(o.b)((function(e){return{dialogs:B(e),users:H(e),auth:e.auth,chatFilter:e.dialogs.chatFilter}}),{setChatFilter:function(e){return{type:"SET_CHAT_FILTER",filterText:e}}})((function(e){var t,a,s=e.users,r=e.auth,n=e.setChatFilter,c=e.chatFilter,i=e.dialogs,u=(a=c,(t=i).filter((function(e){if(0!==a.length){var s=e.messages.filter((function(e){return T(e.messageText,a)})),r=e.members.filter((function(e){return T(e.userName,a)}));return s.length+r.length>0}return t})));return Object(p.jsx)(C,{dialogs:u,users:s,auth:r,setChatFilter:n,chatFilter:c})})),z=(a(81),function(e){var t=e.messageText,a=e.createdAt,s=e.auth,r=e.userId,n=e.users.filter((function(e){return e.userId===r}))[0];return Object(p.jsxs)("div",{className:"message ".concat(r===s?"message-mine":""),children:[Object(p.jsx)(I,{avatar:n.avatar}),Object(p.jsxs)("div",{className:"message__item",children:[Object(p.jsx)("div",{className:"message__text ".concat(r===s?"message__text-mine":""),children:Object(p.jsx)("span",{children:t})}),Object(p.jsx)("span",{className:"message__date ".concat(r===s?"message__date-mine":""),children:a})]})]})}),U=(a(82),function(e){var t=e.messages,a=e.addMessage,s=e.currentDialog,n=e.auth,c=e.users,u=e.getMessage,o=t[0].messages.map((function(e){var t="".concat(s,"_").concat(e.messageId),a=S()(e.createdAt).format("M/D/gg, h:mm a");return Object(p.jsx)(z,{messageText:e.messageText,createdAt:a,auth:n,userId:e.userId,users:c},t)})),d=t[0].members.filter((function(e){return e.userId!==n}))[0],l=A(t[0].members,n,c),m=r.a.createRef(),g=function(){a(s,m.current.value,6),m.current.value="",u(s,d.userId)};return Object(p.jsxs)("div",{className:"messages",children:[Object(p.jsxs)("div",{className:"messages__header",children:[Object(p.jsx)(i.b,{to:"/",className:"messages__back ",children:Object(p.jsx)("button",{className:"array_back",children:"\u2190"})}),Object(p.jsx)(I,{avatar:l.avatar,online:l.online}),Object(p.jsx)("span",{children:l.userName})]}),Object(p.jsx)("div",{className:"messages__content",children:o}),Object(p.jsxs)("div",{className:"add-message",children:[Object(p.jsx)("input",{ref:m,type:"text",placeholder:"Type your message",onKeyDown:function(e){return function(e){13===e.keyCode&&g()}(e)}}),Object(p.jsx)("button",{onClick:g,children:"Send"})]})]})}),W=a(10),q=Object(W.c)(Object(o.b)((function(e){return{dialogs:G(e),auth:J(e),users:H(e)}}),{addMessage:x,getMessage:function(e,t){return function(a){var s=new Audio(b);setTimeout((function(){g().then((function(s){a(x(e,s.data.value,t))})),s.play()}),1e4)}}}),u.f)((function(e){var t=e.match,a=e.dialogs,s=e.addMessage,r=e.auth,n=e.users,c=e.getMessage,i=t.params.dialogId,u=a.filter((function(e){return e.dialogId===i}));return Object(p.jsx)(U,{messages:u,addMessage:s,currentDialog:i,auth:r,users:n,getMessage:c})}));a(83);var Q=function(){return Object(p.jsx)(i.a,{children:Object(p.jsxs)("div",{className:"dialogs",children:[Object(p.jsx)(u.b,{path:"/",render:function(){return Object(p.jsx)(R,{})}}),Object(p.jsx)(u.b,{path:"/:dialogId",render:function(){return Object(p.jsx)(q,{})}}),Object(p.jsx)(u.a,{from:"*",to:"/"})]})})},V=a(44),K={users:[{userId:1,userName:"Alice Freeman",avatar:"https://i.pravatar.cc/150?img=58",online:!0},{userId:2,userName:"Josefina",avatar:"https://i.pravatar.cc/150?img=11",online:!0},{userId:3,userName:"Velazquez",avatar:"https://i.pravatar.cc/150?img=28",online:!0},{userId:4,userName:"Barrera",avatar:"https://i.pravatar.cc/150?img=51",online:!0},{userId:5,userName:"Mellisa Davenport",avatar:"https://i.pravatar.cc/150?img=48",online:!0},{userId:6,userName:"Me",avatar:null,online:!0}]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;return t.type,e},X={userId:6,avatar:null,userName:null,islogin:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(d.a)(Object(d.a)({},e),{},{avatar:t.data.picture.data.url,userName:t.data.name,islogin:!0});case"LOGOUT_USER":return Object(d.a)(Object(d.a)({},e),{},{avatar:null,userName:null,islogin:!1});default:return e}},Z=a(45),$=a.n(Z),ee=a(28),te={key:"root",storage:$.a},ae=Object(W.b)({dialogs:v,users:P,auth:Y}),se=Object(ee.a)(te,ae),re=Object(W.d)(se,Object(W.a)(V.a)),ne=Object(ee.b)(re),ce=a(46);c.a.render(Object(p.jsx)(o.a,{store:re,children:Object(p.jsx)(ce.a,{loading:null,persistor:ne,children:Object(p.jsx)(Q,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.dfd0bac3.chunk.js.map